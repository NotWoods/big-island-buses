{"version":3,"file":"service-worker.js","sources":["../src/service-worker.ts"],"sourcesContent":["const CACHE = 'network-or-cache';\n\nexport declare var self: ServiceWorkerGlobalScope;\n\nself.addEventListener('install', evt => {\n  evt.waitUntil(precache());\n});\n\nself.addEventListener('fetch', evt => {\n  evt.respondWith(\n    fromNetwork(evt.request, 400).catch(() => fromCache(evt.request)),\n  );\n});\n\nfunction precache() {\n  return caches\n    .open(CACHE)\n    .then(cache =>\n      cache.addAll([\n        './',\n        'index.html',\n        'style.css',\n        'main.js',\n        'api.json',\n        'assets/logo.svg',\n        'assets/lines.svg',\n        'assets/tigeroakes.svg',\n      ]),\n    );\n}\n\nfunction fromNetwork(request: RequestInfo, timeout: number) {\n  return new Promise<Response>((resolve, reject) => {\n    const timeoutId = setTimeout(reject, timeout);\n    fetch(request).then(response => {\n      clearTimeout(timeoutId);\n      resolve(response);\n    }, reject);\n  });\n}\n\nfunction fromCache(request: RequestInfo) {\n  return caches\n    .open(CACHE)\n    .then(cache => cache.match(request))\n    .then(matching => {\n      if (matching) {\n        return matching;\n      } else {\n        throw new Error('no-match');\n      }\n    });\n}\n"],"names":["CACHE","self","addEventListener","evt","waitUntil","caches","open","then","cache","addAll","respondWith","request","timeout","Promise","resolve","reject","timeoutId","setTimeout","fetch","response","clearTimeout","fromNetwork","catch","match","matching","Error","fromCache"],"mappings":"AAAA,MAAMA,EAAQ,mBAIdC,KAAKC,iBAAiB,UAAWC,IAC/BA,EAAIC,UAUGC,OACJC,KAAKN,GACLO,KAAKC,GACJA,EAAMC,OAAO,CACX,KACA,aACA,YACA,UACA,WACA,kBACA,mBACA,8BAlBRR,KAAKC,iBAAiB,QAASC,IAC7BA,EAAIO,YAsBN,SAAqBC,EAAsBC,GACzC,OAAO,IAAIC,QAAkB,CAACC,EAASC,KACrC,MAAMC,EAAYC,WAAWF,EAAQH,GACrCM,MAAMP,GAASJ,KAAKY,IAClBC,aAAaJ,GACbF,EAAQK,IACPJ,KA3BHM,CAAYlB,EAAIQ,QAAS,KAAKW,MAAM,KA+BxC,SAAmBX,GACjB,OAAON,OACJC,KAAKN,GACLO,KAAKC,GAASA,EAAMe,MAAMZ,IAC1BJ,KAAKiB,IACJ,GAAIA,EACF,OAAOA,EAEP,MAAM,IAAIC,MAAM,eAvCsBC,CAAUvB,EAAIQ"}