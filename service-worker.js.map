{"version":3,"file":"service-worker.js","sources":["../consts:infoWorker","../src/service-worker/index.js"],"sourcesContent":["export default \"worker/info.js\"","import infoWorker from 'consts:infoWorker';\nconst CACHE = 'big-island-buses-4';\nself.addEventListener('install', (evt) => {\n    evt.waitUntil(precache());\n});\nself.addEventListener('fetch', (evt) => {\n    const url = new URL(evt.request.url);\n    if (url.host === location.host) {\n        if (url.pathname.includes('/routes/')) {\n            // Route pages have same layout as main page\n            evt.respondWith(fromCache('index.html'));\n        }\n        else {\n            // Network then fallback\n            evt.respondWith(fetch(evt.request));\n            evt.waitUntil(update(evt.request));\n        }\n    }\n    else {\n        // External scripts (Google Maps) aren't cached\n        evt.respondWith(fetch(evt.request));\n    }\n});\nfunction precache() {\n    return caches\n        .open(CACHE)\n        .then((cache) => cache.addAll([\n        './',\n        'index.html',\n        'style.css',\n        'main.js',\n        'api.json',\n        'manifest.json',\n        'assets/logo.svg',\n        'assets/pins.png',\n        'assets/lines.svg',\n        'assets/tigeroakes.svg',\n        'icon/favicon.ico',\n        'icon/maskable.png',\n        'icon/transparent.png',\n        infoWorker,\n    ]));\n}\nfunction fromCache(request) {\n    return caches\n        .open(CACHE)\n        .then((cache) => cache.match(request))\n        .then((matching) => {\n        if (matching) {\n            return matching;\n        }\n        else {\n            const url = typeof request === 'string' ? request : request.url;\n            throw new Error(`${url} not cached`);\n        }\n    });\n}\nfunction update(request) {\n    return caches.open(CACHE).then((cache) => {\n        return fetch(request).then((response) => {\n            return cache.put(request, response);\n        });\n    });\n}\n//# sourceMappingURL=index.js.map"],"names":[],"mappings":"AAAA,iBAAe;;ACCf,MAAM,KAAK,GAAG,oBAAoB,CAAC;AACnC,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,GAAG,KAAK;AAC1C,IAAI,GAAG,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC,CAAC;AAC9B,CAAC,CAAC,CAAC;AACH,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAC,GAAG,KAAK;AACxC,IAAI,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;AACzC,IAAI,IAAI,GAAG,CAAC,IAAI,KAAK,QAAQ,CAAC,IAAI,EAAE;AACpC,QAAQ,IAAI,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAE;AAC/C;AACA,YAAY,GAAG,CAAC,WAAW,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,CAAC;AACrD,SAAS;AACT,aAAa;AACb;AACA,YAAY,GAAG,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;AAChD,YAAY,GAAG,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;AAC/C,SAAS;AACT,KAAK;AACL,SAAS;AACT;AACA,QAAQ,GAAG,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;AAC5C,KAAK;AACL,CAAC,CAAC,CAAC;AACH,SAAS,QAAQ,GAAG;AACpB,IAAI,OAAO,MAAM;AACjB,SAAS,IAAI,CAAC,KAAK,CAAC;AACpB,SAAS,IAAI,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC,MAAM,CAAC;AACtC,QAAQ,IAAI;AACZ,QAAQ,YAAY;AACpB,QAAQ,WAAW;AACnB,QAAQ,SAAS;AACjB,QAAQ,UAAU;AAClB,QAAQ,eAAe;AACvB,QAAQ,iBAAiB;AACzB,QAAQ,iBAAiB;AACzB,QAAQ,kBAAkB;AAC1B,QAAQ,uBAAuB;AAC/B,QAAQ,kBAAkB;AAC1B,QAAQ,mBAAmB;AAC3B,QAAQ,sBAAsB;AAC9B,QAAQ,UAAU;AAClB,KAAK,CAAC,CAAC,CAAC;AACR,CAAC;AACD,SAAS,SAAS,CAAC,OAAO,EAAE;AAC5B,IAAI,OAAO,MAAM;AACjB,SAAS,IAAI,CAAC,KAAK,CAAC;AACpB,SAAS,IAAI,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;AAC9C,SAAS,IAAI,CAAC,CAAC,QAAQ,KAAK;AAC5B,QAAQ,IAAI,QAAQ,EAAE;AACtB,YAAY,OAAO,QAAQ,CAAC;AAC5B,SAAS;AACT,aAAa;AACb,YAAY,MAAM,GAAG,GAAG,OAAO,OAAO,KAAK,QAAQ,GAAG,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC;AAC5E,YAAY,MAAM,IAAI,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC;AACjD,SAAS;AACT,KAAK,CAAC,CAAC;AACP,CAAC;AACD,SAAS,MAAM,CAAC,OAAO,EAAE;AACzB,IAAI,OAAO,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,KAAK;AAC9C,QAAQ,OAAO,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,KAAK;AACjD,YAAY,OAAO,KAAK,CAAC,GAAG,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;AAChD,SAAS,CAAC,CAAC;AACX,KAAK,CAAC,CAAC;AACP"}