{"version":3,"file":"main.js","sources":["../consts:pathPrefix","../src/page/utils/num.ts","../src/page/utils/link.ts","../src/page/load.ts","../src/page/utils/date.ts","../src/page/sidebar.ts","../src/page/main.ts"],"sourcesContent":["export default \"/big-island-buses/\"","export const toInt = (n: string) => Number.parseInt(n, 10);\n","import pathPrefix from 'consts:pathPrefix';\n\nexport const enum Type {\n  ROUTE,\n  STOP,\n  TRIP,\n}\n\ninterface State {\n  Route: {\n    ID: string | null;\n    TRIP: string | null;\n  };\n  STOP: string | null;\n}\n\nexport interface Linkable {\n  Type: Type;\n  Value: string;\n}\n\n/**\n * Generates a link for href values. Meant to maintain whatever active data is avaliable.\n * @param {Type} type  \t\tType of item to change\n * @param {string} value \tID to change\n * @return {string} URL to use for href, based on active object.\n */\nexport function createLink(type: Type, value: string, state: State) {\n  let url = pathPrefix;\n  switch (type) {\n    case Type.ROUTE:\n      url += `routes/${value}/`;\n\n      if (state.Route.TRIP != null) {\n        url += state.Route.TRIP;\n      }\n\n      if (state.STOP != null) {\n        url += `?stop=${state.STOP}`\n      }\n      break;\n    case Type.STOP:\n      return `?stop=${value}`;\n    case Type.TRIP:\n      url += `routes/${state.Route.ID}/${value}`;\n      if (state.STOP != null) {\n        url += `?stop=${state.STOP}`\n      }\n      break;\n    default:\n      console.warn('Invalid type provided for link: %i', type);\n      break;\n  }\n  return url;\n}\n\n/**\n * Slices off the fragment from the string and returns the result.\n * Null is returned if the fragment does not exist in the string.\n * @param str Full string\n * @param fragment Part to slice off\n */\nfunction sliceOff(str: string, fragment: string) {\n  const idx = str.indexOf(fragment);\n  if (idx > -1) {\n    return str.substring(idx + fragment.length);\n  } else {\n    return null;\n  }\n}\n\n/**\n * Group 1: Route name\n * Group 2: Trip name\n */\nconst LINK_FORMAT = new RegExp(pathPrefix + 'routes/([\\\\w-]+)/(\\\\w+)?');\n\n/**\n * Parse a link. Handles the current /route/<name>/<trip> format and\n * the older query parameters in hash syntax.\n * Returns the corresponding state object.\n */\nexport function parseLink(url: URL): State {\n  const query =\n    sliceOff(url.hash, '#!') ||\n    sliceOff(url.search, '_escaped_fragment_')?.replace(/%26/g, '&');\n  if (query) {\n    const params = new URLSearchParams(query);\n    return {\n      Route: {\n        ID: params.get('route'),\n        TRIP: params.get('trip'),\n      },\n      STOP: params.get('stop'),\n    };\n  }\n\n  const path = url.pathname.match(LINK_FORMAT);\n  const stop = url.searchParams.get('stop');\n  if (path) {\n    const [, route, trip = null] = path;\n    return {\n      Route: {\n        ID: route,\n        TRIP: trip,\n      },\n      STOP: stop,\n    };\n  } else {\n    return {\n      Route: {\n        ID: null,\n        TRIP: null,\n      },\n      STOP: stop,\n    };\n  }\n}\n","/**\n * Contains construstors and helper functions.  Avoids using the DOM for functions.\n * @author       Tiger Oakes <tigeroakes@gmail.com>\n * @copyright    2014 Tiger Oakes\n */\n\nimport pathPrefix from 'consts:pathPrefix';\nimport { GTFSData, Stop, Trip } from '../gtfs-types';\nimport { toInt } from './utils/num';\nimport { createLink, Type, Linkable } from './utils/link';\n\nexport const enum View {\n  LIST,\n\n  MAP_PRIMARY,\n  STREET_PRIMARY,\n}\n\nexport interface ActiveState {\n  Route: {\n    ID: string | null;\n    TRIP: string | null;\n  };\n  STOP: string | null;\n  View: {\n    ROUTE: View;\n    STOP: View;\n  };\n}\n\nexport let Active: ActiveState = {\n  Route: {\n    ID: null,\n    TRIP: null,\n  },\n  STOP: null,\n  View: {\n    ROUTE: View.LIST,\n    STOP: View.MAP_PRIMARY,\n  },\n};\n\nexport const updateEvent = new CustomEvent('pageupdate');\n\nnavigator.serviceWorker?.register(pathPrefix + 'service-worker.js');\n\n/**\n * @type {Record<Type, Function>}\n */\nexport const openCallbacks: Record<Type, Function> = {} as any;\n\nexport const normal = {\n    url: 'assets/pins.png',\n    size: { height: 26, width: 24 },\n    scaledSize: { height: 26, width: 120 },\n    origin: { x: 0, y: 0 },\n    anchor: { x: 12, y: 12 },\n  } as google.maps.Icon,\n  unimportant = {\n    url: 'assets/pins.png',\n    size: { height: 26, width: 24 },\n    scaledSize: { height: 26, width: 120 },\n    origin: { x: 96, y: 0 },\n    anchor: { x: 12, y: 12 },\n  } as google.maps.Icon,\n  userShape = {\n    url: 'assets/pins.png',\n    size: { height: 26, width: 24 },\n    scaledSize: { height: 26, width: 120 },\n    origin: { x: 48, y: 0 },\n    anchor: { x: 12, y: 12 },\n  } as google.maps.Icon,\n  placeShape = {\n    url: 'assets/pins.png',\n    size: { height: 26, width: 24 },\n    scaledSize: { height: 26, width: 120 },\n    origin: { x: 72, y: 0 },\n    anchor: { x: 12, y: 23 },\n  } as google.maps.Icon,\n  stopShape = {\n    url: 'assets/pins.png',\n    size: { height: 26, width: 24 },\n    scaledSize: { height: 26, width: 120 },\n    origin: { x: 24, y: 0 },\n    anchor: { x: 12, y: 20 },\n  } as google.maps.Icon;\n\nexport function setActiveState(newState: ActiveState) {\n  Active = newState;\n}\n\n/**\n * Grabs the API data and parses it into a GTFSData object for the rest of the program.\n */\nexport function getScheduleData(): Promise<GTFSData> {\n  return fetch(pathPrefix + 'api.json')\n    .then(res => {\n      if (res.ok) return res.json();\n      throw new Error(res.statusText);\n    })\n    .then(json => json as GTFSData);\n}\n\nexport function createElement<Tag extends keyof HTMLElementTagNameMap>(\n  type: Tag,\n  props: Partial<HTMLElementTagNameMap[Tag]>,\n) {\n  return Object.assign(document.createElement(type), props);\n}\n\nfunction getCurrentPosition() {\n  return new Promise<Position>((resolve, reject) => {\n    navigator.geolocation.getCurrentPosition(resolve, reject);\n  });\n}\n\nexport interface LocationUpdate {\n  stop: Stop['stop_id'];\n  location: Pick<Coordinates, 'latitude' | 'longitude'>;\n  custom: boolean;\n}\n\n/**\n * Locates the nearest bus stop to the user or custom location\n * @param {Promise} schedulePromise Schedule promise to wait for\n * @param {Coordinates} customLocation Location to use instead of GPS\n */\nlet runOnce = false;\nexport function locateUser(\n  busPromise: Promise<GTFSData>,\n  customLocation?: Pick<Coordinates, 'latitude' | 'longitude'>,\n): Promise<LocationUpdate> {\n  let locatePromise: Promise<{\n    coords: Pick<Coordinates, 'latitude' | 'longitude'>;\n    customLocationFlag?: boolean;\n  }>;\n  if (customLocation) {\n    locatePromise = Promise.resolve({\n      coords: customLocation,\n      customLocationFlag: true,\n    });\n  } else {\n    locatePromise = getCurrentPosition();\n  }\n\n  let closestDistance = Number.MAX_VALUE;\n  let closestStop: Stop['stop_id'];\n\n  return Promise.all([locatePromise, busPromise]).then(([e, schedule]) => {\n    const userPos = e.coords;\n    for (const stop_id of Object.keys(schedule.stops)) {\n      const stop = schedule.stops[stop_id];\n      const distance = Math.sqrt(\n        Math.pow(userPos.latitude - parseFloat(stop.stop_lat), 2) +\n          Math.pow(userPos.longitude - parseFloat(stop.stop_lon), 2),\n      );\n      if (distance < closestDistance) {\n        closestStop = stop_id;\n        closestDistance = distance;\n      }\n    }\n    if (closestStop) {\n      const results = {\n        stop: closestStop,\n        location: userPos,\n        custom: e.customLocationFlag ? true : false,\n      };\n      if (runOnce) {\n        window.dispatchEvent(\n          new CustomEvent('locationupdate', {\n            detail: results,\n          }),\n        );\n      }\n      return results;\n    } else {\n      throw new Error(JSON.stringify(userPos));\n    }\n  });\n}\n\n/**\n * Creates a promise version of the document load event\n * @return {Promise<DocumentReadyState>} resolves if document has loaded\n */\nexport function documentLoad() {\n  if (\n    document.readyState === 'interactive' ||\n    document.readyState === 'complete'\n  ) {\n    return Promise.resolve(document.readyState);\n  }\n\n  return new Promise(resolve => {\n    document.addEventListener('readystatechange', () => {\n      if (document.readyState === 'interactive') {\n        resolve(document.readyState);\n      }\n    });\n  });\n}\n\n/**\n * Generates a link for href values. Meant to maintain whatever active data is avaliable.\n * @param {Type} type  \t\tType of item to change\n * @param {string} value \tID to change\n * @return {string} URL to use for href, based on active object.\n */\nfunction pageLink(type: Type, value: string) {\n  return createLink(type, value, Active);\n}\n\ntype DynamicLinkNode = HTMLAnchorElement & Linkable;\n\n/**\n * Converts an A element into an automatically updating link.\n * @param  {Type} type      What value to change in link\n * @param  {string} value   Value to use\n * @param  {boolean} update Wheter or not to listen for \"pageupdate\" event and update href\n * @return {Node}           A element with custom properties\n */\nexport function convertToLinkable(node: HTMLAnchorElement, type: Type, value: string, update?: boolean) {\n  Object.assign(node, { Type: type, Value: value, href: pageLink(type, value) });\n  node.href = pageLink(type, value);\n  node.addEventListener('click', clickEvent);\n  if (update) {\n    node.addEventListener('pageupdate', function() {\n      node.href = pageLink(type, value);\n    });\n  }\n\n  return node;\n}\n\n/**\n * Creates an A element with custom click events for links.  Can update itself.\n * @param  {Type} type      What value to change in link\n * @param  {string} value   Value to use\n * @param  {boolean} update Wheter or not to listen for \"pageupdate\" event and update href\n * @return {Node}           A element with custom properties\n */\nexport function dynamicLinkNode(type: Type, value: string, update?: boolean) {\n  const node = document.createElement('a') as DynamicLinkNode;\n  return convertToLinkable(node, type, value, update);\n}\n\n/**\n * Navigate to the page described by the `Linkable`.\n */\nexport function openLinkable(link: Linkable) {\n  const state = Active;\n  const val = link.Value;\n  const newLink = pageLink(link.Type, val);\n  const callback = openCallbacks[link.Type];\n  switch (link.Type) {\n    case Type.ROUTE:\n      state.Route.ID = val;\n      break;\n    case Type.STOP:\n      state.STOP = val;\n      break;\n    case Type.TRIP:\n      state.Route.TRIP = val;\n      break;\n  }\n  callback(val);\n  history.pushState(state, null as any, newLink);\n  ga?.('send', 'pageview', { page: newLink, title: document.title });\n}\n\n/**\n * Used for the click event of a dynamicLinkNode\n * @param  {Event} e\n */\nexport function clickEvent(this: Linkable, e: Event) {\n  e.preventDefault?.();\n  e.stopPropagation?.();\n  openLinkable(this);\n  return false;\n}\n\n/**\n * Sorts stop time keys\n * @param {GTFSData stop_times} stopTimes\n * @return ordered list\n */\nexport function sequence(stopTimes: Trip['stop_times']): string[] {\n  const stopSequence = [];\n  for (const key in stopTimes) {\n    stopSequence.push(key);\n  }\n  return stopSequence.sort((a, b) => toInt(a) - toInt(b));\n}\n","import { toInt } from './num.js';\n\n/**\n * Turns a date into a string with hours, minutes.\n * @param  {Date} \tdate Date to convert\n * @param  {string} date 24hr string in format 12:00:00 to convert to string in 12hr format\n * @return {string}    \tString representation of time\n */\nexport function stringTime(date: Date | string): string {\n  if (typeof date === 'string') {\n    if (date.indexOf(':') > -1 && date.lastIndexOf(':') > date.indexOf(':')) {\n      const [hour, min, second] = date.split(':').map(toInt);\n      date = new Date(0, 0, 0, hour, min, second, 0);\n    }\n  }\n  if (typeof date != 'object') {\n    throw new TypeError(`date must be Date or string, not ${typeof date}`);\n  }\n\n  let m = 'am';\n  let displayHour = '';\n  let displayMinute = '';\n  const hr = date.getHours();\n  const min = date.getMinutes();\n\n  if (hr === 0) {\n    displayHour = '12';\n  } else if (hr === 12) {\n    displayHour = '12';\n    m = 'pm';\n  } else if (hr > 12) {\n    const mathHr = hr - 12;\n    displayHour = mathHr.toString();\n    m = 'pm';\n  } else {\n    displayHour = hr.toString();\n  }\n\n  if (min === 0) {\n    displayMinute = '';\n  } else if (min < 10) {\n    displayMinute = ':0' + min.toString();\n  } else {\n    displayMinute = ':' + min.toString();\n  }\n\n  return displayHour + displayMinute + m;\n}\n\n/**\n * Returns a date object based on the string given\n * @param  {string} string in format 13:00:00, from gtfs data\n * @return {Date}\n */\nexport function gtfsArrivalToDate(string: string): Date {\n  const [hour, min, second] = string.split(':').map(s => toInt(s));\n  let extraDays = 0;\n  let extraHours = 0;\n  if (hour > 23) {\n    extraDays = Math.floor(hour / 24);\n    extraHours = hour % 24;\n  }\n  return new Date(0, 0, 0 + extraDays, hour + extraHours, min, second, 0);\n}\n\n/**\n * Combines stringTime() and gtfsArrivalToDate()\n * @param  {string} string in format 13:00:00, from gtfs data\n * @return {string}        String representation of time\n */\nexport function gtfsArrivalToString(string: string) {\n  return stringTime(gtfsArrivalToDate(string));\n}\n\n/**\n * Returns the current time, with date stripped out\n * @return {Date} Current time in hour, min, seconds; other params set to 0\n */\nexport function nowDateTime(): Date {\n  const now = new Date();\n  return new Date(\n    0,\n    0,\n    0,\n    now.getHours(),\n    now.getMinutes(),\n    now.getSeconds(),\n    0,\n  );\n}\n","import { Route } from \"../gtfs-types\";\nimport { convertToLinkable } from './load';\nimport { Type } from './utils/link';\n\n/**\n * Hydrate the pre-rendered sidebar HTML.\n */\nexport function hydrateAside() {\n  const nearbyList = document.getElementById('nearby')!;\n  const otherList = document.getElementById('other')!;\n\n  const routeListItems = new Map<string, HTMLLIElement>();\n  for (const child of otherList.children) {\n    const listItem = child as HTMLLIElement;\n    const route_id = listItem.dataset.route!;\n\n    const link = listItem.querySelector<HTMLAnchorElement>('a.routes__link')!;\n    convertToLinkable(link, Type.ROUTE, route_id, true);\n\n    routeListItems.set(route_id, listItem);\n  }\n\n  return function onLocationChange(nearbyRoutes: Set<Route['route_id']>) {\n    for (const [route_id, listItem] of routeListItems) {\n      if (nearbyRoutes.has(route_id)) {\n        nearbyList.appendChild(listItem);\n      } else {\n        otherList.appendChild(listItem);\n      }\n    }\n  }\n}\n","/**\n * Contains code to build UI. Interacts with DOM.\n * @author       Tiger Oakes <tigeroakes@gmail.com>\n * @copyright    2014 Tiger Oakes\n */\n\nimport { GTFSData, Route, Stop, Trip } from '../gtfs-types.js';\nimport {\n  Active,\n  ActiveState,\n  clickEvent,\n  documentLoad,\n  dynamicLinkNode,\n  getScheduleData,\n  locateUser,\n  LocationUpdate,\n  normal,\n  openCallbacks,\n  placeShape,\n  sequence,\n  setActiveState,\n  stopShape,\n  unimportant,\n  updateEvent,\n  userShape,\n  View,\n  createElement,\n} from './load.js';\nimport {\n  gtfsArrivalToDate,\n  gtfsArrivalToString,\n  nowDateTime,\n  stringTime,\n} from './utils/date.js';\nimport { toInt } from './utils/num.js';\nimport { hydrateAside } from './sidebar.js';\nimport { Linkable, Type, parseLink } from './utils/link.js';\n\nlet map: google.maps.Map | undefined;\nlet streetview: google.maps.StreetViewPanorama | undefined;\nlet autocomplete: google.maps.places.Autocomplete | undefined;\nlet boundsAllStops: google.maps.LatLngBounds | undefined;\nlet markers: StopMarker[] = [];\nlet userMapMarker: LinkableMarker | undefined;\nlet stopMarker: google.maps.Marker | undefined;\n\nconst documentPromise = documentLoad();\nconst schedulePromise = getScheduleData();\nconst locatePromise = locateUser(schedulePromise);\nlet placeMapMarker: LinkableMarker | undefined;\ntry {\n  loadMap();\n} catch (err) {\n  console.error(err);\n  locatePromise.then(function(position) {\n    if (!Active.STOP) openStop(position.stop);\n  });\n}\n\ntype LinkableMarker = google.maps.Marker & Linkable;\ninterface StopMarker extends LinkableMarker {\n  stop_id: string;\n  activeInRoute?: boolean;\n}\n\nfunction stopToPos(stop: Stop) {\n  return new google.maps.LatLng(\n    parseFloat(stop.stop_lat),\n    parseFloat(stop.stop_lon),\n  );\n}\n\nfunction loadMap() {\n  if (\n    !navigator.onLine ||\n    typeof google !== 'object' ||\n    typeof google.maps !== 'object'\n  ) {\n    documentPromise.then(function() {\n      document.body.classList.add('no-map');\n    });\n    throw new Error('Google Maps API has not loaded');\n  }\n  boundsAllStops = new google.maps.LatLngBounds();\n  markers = [];\n\n  function markersAndLatLng(schedule: GTFSData) {\n    return Promise.resolve().then(() => {\n      for (const stop of Object.values(schedule.stops)) {\n        const marker = new google.maps.Marker({\n          position: stopToPos(stop),\n          title: stop.stop_name,\n          icon: normal,\n        }) as StopMarker;\n        marker.Type = Type.STOP;\n        marker.Value = stop.stop_id;\n        marker.stop_id = stop.stop_id;\n        google.maps.event.addListener(marker, 'click', clickEvent);\n        boundsAllStops!.extend(marker.getPosition()!);\n        markers.push(marker);\n      }\n      return {\n        markers: markers,\n        bounds: boundsAllStops!,\n      };\n    });\n  }\n\n  function mapLoad() {\n    return Promise.resolve().then(() => {\n      const mapElement =\n        Active.View.STOP === View.MAP_PRIMARY\n          ? document.getElementById('map-canvas')!\n          : document.getElementById('streetview-canvas')!;\n      const panoElement =\n        Active.View.STOP === View.STREET_PRIMARY\n          ? document.getElementById('map-canvas')!\n          : document.getElementById('streetview-canvas')!;\n\n      map = new google.maps.Map(mapElement, {\n        center: new google.maps.LatLng(19.6, -155.56),\n        zoom: 10,\n        mapTypeControlOptions: {\n          position: google.maps.ControlPosition.TOP_CENTER,\n        },\n        panControlOptions: {\n          position: google.maps.ControlPosition.RIGHT_TOP,\n        },\n        streetViewControlOptions: {\n          position: google.maps.ControlPosition.RIGHT_TOP,\n        },\n        zoomControlOptions: {\n          position: google.maps.ControlPosition.RIGHT_TOP,\n        },\n      });\n\n      streetview = new google.maps.StreetViewPanorama(panoElement, {\n        position: new google.maps.LatLng(19.723835, -155.084741),\n        visible: true,\n        pov: { heading: 34, pitch: 0 },\n        scrollwheel: false,\n        panControlOptions: {\n          position: google.maps.ControlPosition.RIGHT_CENTER,\n        },\n        zoomControlOptions: {\n          style: google.maps.ZoomControlStyle.SMALL,\n          position: google.maps.ControlPosition.RIGHT_CENTER,\n        },\n        addressControl: false,\n      });\n      map.setStreetView(streetview!);\n\n      autocomplete = new google.maps.places.Autocomplete(\n        document.getElementById('search') as HTMLInputElement,\n      );\n      autocomplete.bindTo('bounds', map);\n      google.maps.event.addListener(autocomplete, 'place_changed', function() {\n        const place = autocomplete!.getPlace();\n        if (!place.geometry) return;\n        const loc = place.geometry.location;\n        console.log('Lat %s, Lon %s', loc.lat(), loc.lng());\n        locateUser(schedulePromise, {\n          latitude: loc.lat(),\n          longitude: loc.lng(),\n        }).then(position => {\n          if (!placeMapMarker) {\n            placeMapMarker = new google.maps.Marker({\n              position: new google.maps.LatLng(\n                position.location.latitude,\n                position.location.longitude,\n              ),\n              title: 'Search Location',\n              icon: placeShape,\n              map: map,\n              animation: google.maps.Animation.DROP,\n              zIndex: 1000,\n            }) as LinkableMarker;\n            placeMapMarker.Type = Type.STOP;\n            google.maps.event.addListener(placeMapMarker, 'click', clickEvent);\n          }\n          placeMapMarker.Value = position.stop;\n          openStop(position.stop);\n        });\n      });\n      return map;\n    });\n  }\n\n  Promise.all([\n    documentPromise.then(mapLoad),\n    schedulePromise.then(markersAndLatLng),\n  ]).then(function([map, { markers, bounds }]) {\n    map.setCenter(bounds.getCenter());\n    map.fitBounds(bounds);\n    google.maps.event.addListener(map, 'bounds_changed', function() {\n      const mapBounds = map.getBounds()!;\n      for (const marker of markers) {\n        if (mapBounds.contains(marker.getPosition()!)) {\n          if (marker.getMap() !== map) marker.setMap(map);\n        } else {\n          marker.setMap(null);\n        }\n      }\n    });\n    markers.forEach(marker => marker.setMap(map));\n    locatePromise.then(function(position) {\n      userMapMarker = new google.maps.Marker({\n        position: new google.maps.LatLng(\n          position.location.latitude,\n          position.location.longitude,\n        ),\n        title: position.custom ? 'Location of Place' : 'My Location',\n        icon: position.custom ? placeShape : userShape,\n        map: map,\n        animation: google.maps.Animation.DROP,\n        zIndex: 1000,\n      }) as LinkableMarker;\n      userMapMarker.Type = Type.STOP;\n      userMapMarker.Value = position.stop;\n      google.maps.event.addListener(userMapMarker, 'click', clickEvent);\n      if (!Active.STOP) openStop(position.stop);\n      window.addEventListener('locationupdate', (evt: Event) => {\n        const { custom, location } = (evt as CustomEvent<\n          LocationUpdate\n        >).detail;\n        userMapMarker!.setIcon(custom ? placeShape : userShape);\n        userMapMarker!.setPosition(\n          new google.maps.LatLng(location.latitude, location.longitude),\n        );\n      });\n    });\n  });\n\n  window.addEventListener('resize', function() {\n    google.maps.event.trigger(map, 'resize');\n    google.maps.event.trigger(streetview, 'resize');\n    if (!Active.Route.ID) {\n      map!.setCenter(boundsAllStops!.getCenter());\n      map!.fitBounds(boundsAllStops!);\n    }\n  });\n}\n\nPromise.all([documentPromise.then(hydrateAside), schedulePromise, locatePromise]).then(([onLocationChange, schedule, locationResult]) => {\n  onLocationChange(new Set(schedule.stops[locationResult.stop].routes))\n});\n\ndocumentPromise.then(function() {\n  uiEvents();\n});\n\nfunction openActive(state: ActiveState) {\n  console.log(state);\n  let routePromise;\n  if (state.Route.ID) {\n    routePromise = openRoute(state.Route.ID!).then(bestTrip =>\n      openTrip(state.Route.TRIP ? state.Route.TRIP : bestTrip!),\n    )\n  }\n  return Promise.all([\n    routePromise,\n    state.STOP ? openStop(state.STOP) : undefined,\n  ]).then(() => {});\n}\n\nPromise.all([documentPromise, schedulePromise]).then(function() {\n  if (window.history.state) {\n    setActiveState(window.history.state);\n  } else {\n    const state = parseLink(new URL(location.href)) as ActiveState;\n    state.View = Active.View;\n    setActiveState(state);\n  }\n  openActive(Active);\n});\n\nwindow.onhashchange = function() {\n  const state = parseLink(new URL(location.href)) as ActiveState;\n  state.View = Active.View;\n  setActiveState(state);\n  openActive(Active);\n};\nwindow.onpopstate = function(e: PopStateEvent) {\n  setActiveState(e.state);\n  openActive(Active);\n};\n\n/**\n * Adds click events to buttons in the site.\n */\nfunction uiEvents() {\n  if (!navigator.onLine) {\n    document.getElementById('main')!.classList.add('offline');\n  }\n  document\n    .getElementById('map-toggle')!\n    .addEventListener('click', switchMapStreetview);\n  const select = document.getElementById('trip-select') as HTMLSelectElement &\n    Linkable;\n  select.Type = Type.TRIP;\n  select.addEventListener('change', function(e) {\n    select.Value = select.options[select.selectedIndex].value;\n    clickEvent.call(select, e);\n  });\n\n  function toggleSidebar() {\n    document.getElementById('aside')!.classList.toggle('open');\n  }\n  document\n    .getElementById('screen-cover')!\n    .addEventListener('click', toggleSidebar);\n  document.getElementById('menu')!.addEventListener('click', toggleSidebar);\n  document.getElementById('alt-menu')!.addEventListener('click', toggleSidebar);\n}\n\nfunction removeChildren(parent: HTMLElement) {\n  while (parent.firstChild) parent.removeChild(parent.firstChild);\n}\n\n/**\n * Swaps map and streetview divs\n * @return {[type]} [description]\n */\nfunction switchMapStreetview(this: HTMLElement) {\n  if (!map || !streetview) {\n    console.error('Map and StreetViewPanorama have not loaded');\n    throw new TypeError();\n  }\n\n  const mapParent = document.getElementById('map')!;\n  const panoParent = document.getElementById('streetview-header')!;\n\n  if (Active.View.STOP === View.MAP_PRIMARY) {\n    mapParent.insertBefore(\n      document.getElementById('streetview-canvas')!,\n      mapParent.firstChild,\n    );\n    panoParent.insertBefore(\n      document.getElementById('map-canvas')!,\n      mapParent.firstChild,\n    );\n    this.classList.add('on');\n    Active.View.STOP = View.STREET_PRIMARY;\n  } else if (Active.View.STOP === View.STREET_PRIMARY) {\n    mapParent.insertBefore(\n      document.getElementById('map-canvas')!,\n      mapParent.firstChild,\n    );\n    panoParent.insertBefore(\n      document.getElementById('streetview-canvas')!,\n      mapParent.firstChild,\n    );\n    this.classList.remove('on');\n    Active.View.STOP = View.MAP_PRIMARY;\n  }\n  dispatchEvent(updateEvent);\n}\n\n/**\n * Creates a route UI and opens the section if the map is currently in fullscreen mode.\n * @param  {string} route_id ID of the route\n * @return {Promise<string>} trip_id that can be used in openTrip. Best matches time and open stop, if any.\n * @throws {string} If the ID does not exist\n */\nfunction openRoute(route_id: Route['route_id']) {\n  return schedulePromise.then(buses => {\n    const thisRoute = buses.routes[route_id];\n    if (!thisRoute || !thisRoute.route_id) {\n      console.error('Invalid Route %s', route_id);\n      //throw route_id;\n      return;\n    }\n\n    Active.Route.ID = route_id;\n    Active.Route.TRIP = null;\n\n    document.title = `${thisRoute.route_long_name} | Big Island Buses`;\n\n    document.body.style.setProperty(\n      '--route-color',\n      `#${thisRoute.route_color}`,\n    );\n    document.body.style.setProperty(\n      '--route-text-color',\n      `#${thisRoute.route_text_color}`,\n    );\n\n    const name = document.getElementById('route_long_name')!;\n    name.textContent = thisRoute.route_long_name;\n\n    let firstStop: Stop['stop_id'] | undefined;\n    let lastStop: Stop['stop_id'] | undefined;\n    let largest = 0;\n    let earliest = new Date(0, 0, 0, 23, 59, 59, 0);\n    let latest = new Date(0, 0, 0, 0, 0, 0, 0);\n    let earliestTrip: Trip['trip_id'] | undefined;\n    let earliestTripStop: Stop['stop_id'] | undefined;\n\n    const nowTime = nowDateTime();\n    let closestTrip: Trip['trip_id'] | undefined;\n    let closestTripTime = Number.MAX_VALUE;\n    let closestTripStop: Stop['stop_id'] | undefined;\n    const select = document.getElementById('trip-select')!;\n    removeChildren(select);\n\n    const routeStops = new Set<Stop['stop_id']>();\n\n    for (const trip_id of Object.keys(thisRoute.trips)) {\n      const trip = thisRoute.trips[trip_id];\n      for (const stop in trip.stop_times) {\n        if (stop == '1' && toInt(trip.direction_id) === 0) {\n          firstStop = trip.stop_times[stop].stop_id;\n        } else {\n          if (toInt(stop) > largest && toInt(trip.direction_id) === 0) {\n            largest = toInt(stop);\n            lastStop = trip.stop_times[stop].stop_id;\n          }\n        }\n\n        routeStops.add(trip.stop_times[stop].stop_id);\n\n        const timeDate = gtfsArrivalToDate(trip.stop_times[stop].arrival_time);\n        if (timeDate > latest) {\n          latest = timeDate;\n        }\n        if (timeDate < earliest) {\n          earliest = timeDate;\n          earliestTrip = trip.trip_id;\n          earliestTripStop = trip.stop_times[stop].stop_id;\n        }\n\n        if (\n          timeDate.getTime() - nowTime.getTime() < closestTripTime &&\n          timeDate.getTime() - nowTime.getTime() > 0\n        ) {\n          closestTripTime = timeDate.getTime() - nowTime.getTime();\n          closestTrip = trip.trip_id;\n          closestTripStop = trip.stop_times[stop].stop_id;\n        }\n      }\n      if (!closestTrip) {\n        //Too late for all bus routes\n        closestTripTime =\n          new Date(\n            0,\n            0,\n            1,\n            earliest.getHours(),\n            earliest.getMinutes(),\n            earliest.getSeconds(),\n            0,\n          ).getTime() - nowTime.getTime();\n        closestTrip = earliestTrip;\n        closestTripStop = earliestTripStop;\n      }\n      const option = createElement('option', {\n        value: trip.trip_id,\n        textContent: trip.trip_short_name,\n      });\n      select.appendChild(option);\n    }\n\n    const minString =\n      Math.floor(closestTripTime / 60000) != 1\n        ? Math.floor(closestTripTime / 60000) + ' minutes'\n        : '1 minute';\n    document.getElementById('place-value')!.textContent =\n      'Between ' +\n      buses!.stops[firstStop!].stop_name +\n      ' - ' +\n      buses!.stops[lastStop!].stop_name;\n    document.getElementById('time-value')!.textContent =\n      stringTime(earliest) + ' - ' + stringTime(latest);\n    document.getElementById('next-stop-value')!.textContent =\n      'Reaches ' +\n      buses!.stops[closestTripStop!].stop_name +\n      ' in ' +\n      minString;\n\n    document.getElementById('main')!.classList.add('open');\n\n    if (\n      navigator.onLine &&\n      typeof google === 'object' &&\n      typeof google.maps === 'object'\n    ) {\n      const routeBounds = new google.maps.LatLngBounds();\n      for (const marker of markers) {\n        if (routeStops.has(marker.stop_id)) {\n          marker.setIcon(normal);\n          marker.setZIndex(200);\n          marker.activeInRoute = true;\n          routeBounds.extend(marker.getPosition()!);\n        } else {\n          marker.setIcon(unimportant);\n          marker.setZIndex(null);\n          marker.activeInRoute = false;\n        }\n      }\n      if (stopMarker) {\n        stopMarker.setIcon(stopShape);\n        stopMarker.setZIndex(300);\n      }\n\n      google.maps.event.trigger(map, 'resize');\n      map!.setCenter(routeBounds.getCenter());\n      map!.fitBounds(routeBounds);\n      google.maps.event.trigger(streetview, 'resize');\n    }\n\n    window.dispatchEvent(updateEvent);\n    openTrip(closestTrip!);\n    return closestTrip;\n  });\n}\n\n/**\n * Creates a Stop fragment in the #stop element\n * @param  {[type]} stop_id Id of the stop to use\n * @return {void}           Creates an element\n */\nfunction openStop(stop_id: Stop['stop_id']) {\n  return schedulePromise.then(buses => {\n    const thisStop = buses.stops[stop_id];\n    if (!thisStop || !thisStop.stop_id) {\n      console.error('Invalid Stop %s', stop_id);\n      //throw stop_id;\n      return;\n    }\n\n    Active.STOP = stop_id;\n\n    if (streetview) {\n      streetview.setPosition(stopToPos(thisStop));\n    }\n    if (map) {\n      for (const marker of markers) {\n        if (marker.activeInRoute || Active.Route.ID == null) {\n          marker.setIcon(normal);\n        } else {\n          marker.setIcon(unimportant);\n        }\n        if (marker.stop_id === thisStop.stop_id) {\n          stopMarker = marker;\n        }\n      }\n\n      stopMarker!.setIcon(stopShape);\n      stopMarker!.setZIndex(300);\n\n      streetview!.setPosition(stopMarker!.getPosition()!);\n      google.maps.event.trigger(streetview, 'resize');\n      google.maps.event.addListener(streetview!, 'pano_changed', function() {\n        document.getElementById(\n          'address',\n        )!.textContent = streetview!.getLocation().description!;\n        streetview!.setPov(streetview!.getPhotographerPov());\n      });\n    }\n    if (!streetview) {\n      document.getElementById('stop')!.classList.add('no-streetview');\n    }\n\n    document.getElementById('stop_name')!.textContent = thisStop.stop_name;\n\n    const list = document.getElementById('connections')!;\n    removeChildren(list);\n    for (const route_id of thisStop.routes) {\n      const route = buses.routes[route_id];\n      const linkItem = dynamicLinkNode(Type.ROUTE, route_id, false);\n      linkItem.className = 'connections__link';\n      linkItem.style.borderColor = `#${route.route_color}`;\n      linkItem.textContent = route.route_long_name;\n\n      const listItem = document.createElement('li');\n      listItem.className = 'connections__item';\n      listItem.append(linkItem);\n      if (Active.Route.ID === route_id) {\n        listItem.classList.add('connections__item--active-route');\n      }\n      list.append(listItem);\n    }\n\n    document.getElementById('main')!.classList.add('open-stop');\n    window.dispatchEvent(updateEvent);\n  });\n}\n\nfunction openTrip(trip_id: Trip['trip_id']) {\n  return schedulePromise.then(buses => {\n    const route = buses.routes[Active.Route.ID!];\n    if (!route) {\n      console.error('Invalid Route %s', Active.Route.ID);\n      return;\n    }\n    const trip = route.trips[trip_id];\n    if (!trip || !trip.trip_id) {\n      console.error('Invalid trip %s in route %s', trip_id, Active.Route.ID);\n      return;\n    }\n\n    Active.Route.TRIP = trip_id;\n\n    const schedule = document.getElementById('schedule')!;\n    removeChildren(schedule);\n\n    const stopSequence = sequence(trip.stop_times);\n\n    const select = document.getElementById('trip-select') as HTMLSelectElement;\n    for (let option = 0; option < select.options.length; option++) {\n      if (select.options[option].value === trip_id) {\n        select.selectedIndex = option;\n        select.options[option].selected = true;\n        break;\n      }\n    }\n\n    document.getElementById('week-days-value')!.textContent =\n      buses.calendar[trip.service_id].text_name;\n\n    for (const sequence of stopSequence) {\n      const tripStop = trip.stop_times[sequence];\n      const routeListItem = dynamicLinkNode(Type.STOP, tripStop.stop_id);\n      routeListItem.className = 'schedule__stop';\n\n      const lines = createElement('div', { className: 'lines' });\n      for (let j = 0; j < 2; j++) {\n        const line = createElement('span', { className: 'line' });\n        lines.appendChild(line);\n      }\n      routeListItem.appendChild(lines);\n\n      const name = createElement('span', {\n        className: 'schedule__stopname name',\n        textContent: buses.stops[tripStop.stop_id].stop_name,\n      });\n      routeListItem.appendChild(name);\n\n      const time = createElement('time', {\n        className: 'schedule__time',\n        textContent: gtfsArrivalToString(tripStop.arrival_time),\n      });\n      routeListItem.appendChild(time);\n\n      const connection = createElement('div', {\n        className: 'connections',\n      });\n      for (const connectRoute of buses.stops[tripStop.stop_id].routes) {\n        if (connectRoute === Active.Route.ID) {\n          continue;\n        }\n\n        const item = createElement('span', {\n          className: 'route-dash',\n          title: buses.routes[connectRoute].route_long_name,\n        });\n        item.style.backgroundColor = buses.routes[connectRoute].route_color;\n\n        connection.appendChild(item);\n      }\n      routeListItem.appendChild(connection);\n      schedule.appendChild(routeListItem);\n    }\n\n    window.dispatchEvent(updateEvent);\n  });\n}\n\nopenCallbacks[Type.ROUTE] = openRoute;\nopenCallbacks[Type.STOP] = openStop;\nopenCallbacks[Type.TRIP] = openTrip;\n"],"names":[],"mappings":"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"}