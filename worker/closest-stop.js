const t=6378137;function e(t){return t*Math.PI/180}const n="latitude",r="longitude";function o(t){if(t instanceof a)return new a(t[n],t[r]);if("lat"in t&&"lng"in t)return"function"==typeof t.lat&&"function"==typeof t.lng?new a(t.lat(),t.lng()):new a(parseFloat(t.lat),parseFloat(t.lng));if("lat"in t&&"long"in t)return new a(parseFloat(t.lat),parseFloat(t.long));if("lat"in t&&"lon"in t)return new a(parseFloat(t.lat),parseFloat(t.lon));if("latitude"in t&&"longitude"in t)return new a(parseFloat(t.latitude),parseFloat(t.longitude));if("number"==typeof t[0]&&"number"==typeof t[1])return new a(t[1],t[0]);if("x"in t&&"y"in t)return new a(parseFloat(t.y),parseFloat(t.x));throw new TypeError(`Cannot convert ${t} to LatLng`)}class a{constructor(t,e,o=!1){if(t=parseFloat(t),e=parseFloat(e),Number.isNaN(t)||Number.isNaN(e))throw TypeError("lat or lng are not numbers");o||(t=Math.min(Math.max(t,-90),90),e=180==e?e:((e+180)%360+360)%360-180),Object.defineProperty(this,n,{value:t}),Object.defineProperty(this,r,{value:e}),this.length=2,Object.freeze(this)}equals(t){return a=t,e=o(e=this),a=o(a),Math.abs(e[n]-a[n])<Number.EPSILON&&Math.abs(e[r]-a[r])<Number.EPSILON;var e,a}lat(){return this[n]}lng(){return this[r]}get x(){return this[r]}get y(){return this[n]}get 0(){return this[r]}get 1(){return this[n]}get long(){return this[r]}get lon(){return this[r]}toJSON(){return{lat:this[n],lng:this[r]}}toString(){return`(${this[n]}, ${this[r]})`}toUrlValue(t=6){return t=parseInt(t),parseFloat(this[n].toFixed(t))+","+parseFloat(this[r].toFixed(t))}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this[t++],done:!1}:{done:!0},[Symbol.iterator](){return this}}}}function s(n,r,a=t){return function(t,n){const r=e(t.lat()),o=e(t.lng()),a=e(n.lat()),s=e(n.lng());return 2*Math.asin(Math.sqrt(Math.pow(Math.sin((r-a)/2),2)+Math.cos(r)*Math.cos(a)*Math.pow(Math.sin((o-s)/2),2)))}(n=o(n),r=o(r))*a}let i;!function(t){function e(t,e,n){e?(console.error("Worker caught an error:",e),self.postMessage([t,e])):self.postMessage([t,null,n])}self.addEventListener("message",function(n){const r=n.data;if(!Array.isArray(r)||2!==r.length)return;const[o,a]=r;Promise.resolve(t(a)).then(t=>e(o,null,t),t=>e(o,t))})}(t=>t.stops?void(i=t.stops):function(t){if(!i)throw new Error("stops not ready");let e,n=Number.MAX_VALUE;for(const r of i){const o=s(t,{lat:r.stop_lat,lng:r.stop_lon});o<n&&(e=r,n=o)}return e}(t));
//# sourceMappingURL=closest-stop.js.map
